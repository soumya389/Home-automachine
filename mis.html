<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Smart Home - 8 Relay Control</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: 'Inter', sans-serif;
      background: linear-gradient(to right, #f5f7fa, #c3cfe2);
      color: #333;
    }
    header {
      background: #2c3e50;
      color: white;
      padding: 20px;
      text-align: center;
      font-size: 1.8em;
      letter-spacing: 1px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    }
    .container {
      max-width: 1200px;
      margin: 30px auto;
      padding: 20px;
    }
    .device-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 20px;
    }
    .device-card {
      background: #fff;
      border-radius: 16px;
      padding: 20px;
      text-align: center;
      box-shadow: 0 6px 18px rgba(0, 0, 0, 0.1);
      transition: transform 0.3s ease;
    }
    .device-card:hover {
      transform: translateY(-5px);
    }
    .device-card img {
      width: 60px;
      height: 60px;
      margin-bottom: 15px;
    }
    .device-title {
      font-size: 1.2em;
      font-weight: 600;
      margin-bottom: 8px;
    }
    .status-text {
      font-size: 0.9em;
      color: #666;
      margin-bottom: 10px;
    }
    .toggle-switch {
      position: relative;
      display: inline-block;
      width: 60px;
      height: 34px;
    }
    .toggle-switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }
    .slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #ccc;
      transition: 0.4s;
      border-radius: 34px;
    }
    .slider:before {
      position: absolute;
      content: "";
      height: 26px;
      width: 26px;
      left: 4px;
      bottom: 4px;
      background-color: white;
      transition: 0.4s;
      border-radius: 50%;
    }
    input:checked + .slider {
      background-color: #4CAF50;
    }
    input:checked + .slider:before {
      transform: translateX(26px);
    }
    .notification {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background-color: #2ecc71;
      color: white;
      padding: 12px 18px;
      border-radius: 6px;
      display: none;
    }
  </style>
</head>
<body>

  <header>
    C.SOUMYA - Smart Home 8 Relay Control
  </header>

  <div class="container">
    <div class="device-grid">
      <!-- Device 1 -->
      <div class="device-card">
        <img src="https://img.icons8.com/fluency/96/light-on.png" alt="Light"/>
        <div class="device-title">Living Room Light</div>
        <div class="status-text" id="status-text-1">OFF</div>
        <label class="toggle-switch">
          <input type="checkbox" id="toggle-1" onchange="toggleDevice(1, this.checked)">
          <span class="slider"></span>
        </label>
      </div>
      <!-- Device 2 -->
      <div class="device-card">
        <img src="https://img.icons8.com/fluency/96/kitchen-room.png" alt="Kitchen Light"/>
        <div class="device-title">Kitchen Light</div>
        <div class="status-text" id="status-text-2">OFF</div>
        <label class="toggle-switch">
          <input type="checkbox" id="toggle-2" onchange="toggleDevice(2, this.checked)">
          <span class="slider"></span>
        </label>
      </div>
      <!-- Device 3 -->
      <div class="device-card">
        <img src="https://img.icons8.com/fluency/96/bedroom.png" alt="Bedroom Light"/>
        <div class="device-title">Bedroom Light</div>
        <div class="status-text" id="status-text-3">OFF</div>
        <label class="toggle-switch">
          <input type="checkbox" id="toggle-3" onchange="toggleDevice(3, this.checked)">
          <span class="slider"></span>
        </label>
      </div>
      <!-- Device 4 -->
      <div class="device-card">
        <img src="https://img.icons8.com/fluency/96/dining-room.png" alt="Dining Room Light"/>
        <div class="device-title">Dining Room Light</div>
        <div class="status-text" id="status-text-4">OFF</div>
        <label class="toggle-switch">
          <input type="checkbox" id="toggle-4" onchange="toggleDevice(4, this.checked)">
          <span class="slider"></span>
        </label>
      </div>
      <!-- Device 5 -->
      <div class="device-card">
        <img src="https://img.icons8.com/fluency/96/fan.png" alt="Fan"/>
        <div class="device-title">Living Room Fan</div>
        <div class="status-text" id="status-text-5">OFF</div>
        <label class="toggle-switch">
          <input type="checkbox" id="toggle-5" onchange="toggleDevice(5, this.checked)">
          <span class="slider"></span>
        </label>
      </div>
      <!-- Device 6 -->
      <div class="device-card">
        <img src="https://img.icons8.com/fluency/96/air-conditioner.png" alt="AC"/>
        <div class="device-title">Air Conditioner</div>
        <div class="status-text" id="status-text-6">OFF</div>
        <label class="toggle-switch">
          <input type="checkbox" id="toggle-6" onchange="toggleDevice(6, this.checked)">
          <span class="slider"></span>
        </label>
      </div>
      <!-- Device 7 -->
      <div class="device-card">
        <img src="https://img.icons8.com/fluency/96/water-heater.png" alt="Heater"/>
        <div class="device-title">Water Heater</div>
        <div class="status-text" id="status-text-7">OFF</div>
        <label class="toggle-switch">
          <input type="checkbox" id="toggle-7" onchange="toggleDevice(7, this.checked)">
          <span class="slider"></span>
        </label>
      </div>
      <!-- Device 8 -->
      <div class="device-card">
        <img src="https://img.icons8.com/fluency/96/garden.png" alt="Garden Lights"/>
        <div class="device-title">Garden Lights</div>
        <div class="status-text" id="status-text-8">OFF</div>
        <label class="toggle-switch">
          <input type="checkbox" id="toggle-8" onchange="toggleDevice(8, this.checked)">
          <span class="slider"></span>
        </label>
      </div>
    </div>
  </div>

  <div class="notification" id="notification">Action completed</div>
<!-- Firebase v8 CDN Scripts -->
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

<script>
  // ✅ Your Firebase config
  const firebaseConfig = {
    apiKey: "AIzaSyBl-0kLLVg55sg2Jc5b_GjMc-5YiuQ51eo",
    authDomain: "html-2d983.firebaseapp.com",
    databaseURL: "https://html-2d983-default-rtdb.firebaseio.com",
    projectId: "html-2d983",
    storageBucket: "html-2d983.appspot.com",
    messagingSenderId: "184053383466",
    appId: "1:184053383466:web:109b9f2fb222230e871e53",
    measurementId: "G-HP3BP6H2GK"
  };

  // ✅ Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  const database = firebase.database();

  // ✅ Toggle Device Function
  function toggleDevice(deviceId, state) {
    const relayPath = "devices/relay" + deviceId;
    database.ref(relayPath).set(state)
      .then(() => {
        document.getElementById(`status-text-${deviceId}`).textContent = state ? "ON" : "OFF";
        showNotification(`Relay ${deviceId} is now ${state ? "ON" : "OFF"}`);
      })
      .catch((error) => {
        console.error("Write failed:", error);
        showNotification("Failed to update Firebase.");
      });
  }

  // ✅ Notification Helper
  function showNotification(message) {
    const note = document.getElementById("notification");
    note.textContent = message;
    note.style.display = "block";
    setTimeout(() => { note.style.display = "none"; }, 3000);
  }

  // ✅ Sync Toggle Status on Load
  database.ref("devices").on("value", (snapshot) => {
    const data = snapshot.val() || {};
    for (let i = 1; i <= 8; i++) {
      const state = data[`relay${i}`] || false;
      document.getElementById(`toggle-${i}`).checked = state;
      document.getElementById(`status-text-${i}`).textContent = state ? "ON" : "OFF";
    }
  });
</script>


</body>
</html>
